name: App test

on:
    push:
        tags-ignore:
            - '[0-9]+.[0-9]+.[0-9]+'
        branches:
            - '**'
    pull_request:
        branches:
            - '*'

# env:
#     MATRIX_OS: ubuntu-latest windows-latest macos-latest

jobs:
    test:
        strategy:
            fail-fast: false
            matrix:
                build:
                    - name: app_test
                      platformShort: linux
                      platform: linux/amd64
                      os: ubuntu-latest
                    - name: app_test
                      platformShort: windows
                      platform: windows/amd64
                      os: windows-latest
                    - name: app_test
                      platformShort: darwin
                      platform: darwin/universal
                      os: macos-latest
        runs-on: ${{ matrix.build.os }}
        steps:
            - uses: actions/checkout@v4

            - name: Setup app
              uses: ./.github/actions/core-setup.yml

            - name: Test app
              uses: ./.github/actions/app-test.yml
